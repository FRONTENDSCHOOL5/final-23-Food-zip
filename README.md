# FOODZIP
![image](https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/120389195/6e6ae43f-4f4e-4fb8-9050-cee8a330df05)
#### 배포 사이트 : https://foodzip.netlify.app/
- Email : fuzip@gmail.com 
- Password : 111111!
## 🖥 프로젝트 소개
FOODZIP은 식사를 즐기며 맛있는 음식과 훌륭한 식당을 찾는 이들을 위한 식당 공유 커뮤니티입니다. 이 프로젝트는 사용자들이 맛있는 음식을 찾고 공유하며 즐거운 식사 경험을 공유하는 데 초점을 맞추고 있습니다. 해당 커뮤니티를 통해 사용자들은 원하는 식당을 쉽게 찾고, 다양한 음식에 대한 정보를 얻을 수 있으며, 같은 관심사를 가진 사람들과 소통할 수 있습니다. 함께 맛있는 음식과 즐거운 식사를 즐길 수 있는 FOODZIP에 여러분을 초대합니다!
#### 개발 기간
![image](https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/120389195/2d2bbbca-f780-4502-9802-2132de5450bf)
## 🧑‍🤝‍🧑 어? 금지의 조원 소개
 <table>
   <tr>
     <td align="center">
       <a href="https://github.com/easyxxu">
       <img src="https://avatars.githubusercontent.com/u/107910342?v=4" width="150px;" alt=""/><br />
       <sub>
         <b>이지수</b>
         <br>
         <span>조장</span>
       </sub>
       </a>
       <br>
     </td>
     <td align="center">
       <a href="https://github.com/yyuli">
       <img src="https://avatars.githubusercontent.com/u/119276010?v=4" width="150px;" alt=""/><br />
       <sub>
         <b>김율이</b>
         <br>
         <span>조원</span>
       </sub>
       </a>
       <br>
     </td>
     <td align="center">
       <a href="https://github.com/shyoun94">
       <img src="https://avatars.githubusercontent.com/u/38209666?v=4?s=100" width="150px;" alt=""/><br />
       <sub>
         <b>윤선호</b>
         <br>
         <span>조원</span>
       </sub>
       </a>
       <br>
     </td>
     <td align="center">
       <a href="https://github.com/eunjoo0311">
       <img src="https://avatars.githubusercontent.com/u/120389195?v=4" width="150px;" alt=""/><br />
       <sub>
         <b>이은주</b>
         <br>
         <span>조원</span>
       </sub>
       </a>
       <br>
     </td>
   </tr>
</table>

### 역할 분담
### 팀 문화
- <strong>투명한 정보 공유</strong> : 협업에 있어 서로의 작업에 대한 이해를 깊게 합니다.
  
- <strong>신속한 의견 조율</strong> : 실행 속도와 책임감이 높아집니다.
  
- <strong>진입장벽 낮추기</strong> : 팀 간의 진입장벽을 낮추고, 팀원 모두가 프로젝트에 적극적으로 참여 하는 환경을 만들었습니다.
  
- <strong>건강한 팀 분위기</strong> : 원활한 의사소통을 통해 상호 신뢰를 쌓아갑니다. 결과적으로 모든 팀원이 프로젝트를 적극적으로 참여하는 분위기를 조성했습니다.
  
- <strong>협업의 효율성 극대화</strong> : 피드백 과정을 통해 작업 과정을 개선하고 팀원들끼리 서로를 환기할 수 있습니다.

## 🛠 테크 스택
<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=white">  <img src="https://img.shields.io/badge/styledcomponents-DB7093?style=for-the-badge&logo=styledcomponents&logoColor=white">  <img src="https://img.shields.io/badge/eslint-4B32C3?style=for-the-badge&logo=eslint&logoColor=white">  <img src="https://img.shields.io/badge/prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=white">  <img src="https://img.shields.io/badge/figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white">  <img src="https://img.shields.io/badge/KakaoAPI-FFCD00?style=for-the-badge&logo=kakao&logoColor=white">  <img src="https://img.shields.io/badge/reacthookform-EC5990?style=for-the-badge&logo=reacthookform&logoColor=white">  <img src="https://img.shields.io/badge/netlify-00C7B7?style=for-the-badge&logo=netlify&logoColor=white">


## 👨‍👩‍👧‍👧 협업 툴
<img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">  <img src="https://img.shields.io/badge/discord-5865F2?style=for-the-badge&logo=discord&logoColor=white">  <img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white">
## 📄 페이지 소개
// 회원가입

<img src="https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/119276010/8649ee1f-a826-4401-bfcd-650affaccbc9" width="250"/>

// 로그인

<img src="https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/119276010/4e60dada-ad37-45f2-b748-7d29a5ea0ed9" width="250"/>

// 팔로우

// splash

<img src="https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/119276010/5faf3b1d-28e0-437b-b3a7-e37ff4c0d056" width="250"/>

// search

<img src="https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/119276010/b2502b6a-b237-421c-8089-a3502f0348e0" width="250"/>

// 채팅

<img src="https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/119276010/3c67bf0a-3641-436f-8625-5910d79697a2" width="250"/>

// 게시글 등록, 수정
<img src="https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/119276010/5174f33b-6cea-4c45-bb3f-b9bfafb8fcae" width="250"/>

// 땡겨요
<img src="https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/119276010/cc3164b2-8a44-4a49-af7a-4b0d920ed007" width="250"/>

// 댓글, 좋아요
<img src="https://github.com/FRONTENDSCHOOL5/final-23-Food-zip/assets/119276010/0e31fcf0-26a5-4ffb-834d-05109105d201" width="250"/>


## 📌 주요 기능 소개
| 코드 | 설명 |
|------|--------|
| `import useForm` | react-hook-form 라이브러리 사용을 위해 `useForm`을 가져옵니다. |
| `useForm` 활용 | useForm 훅을 호출하여 필요한 메소드와 속성을 추출합니다. 이 통해 입력, 제출, 오류 및 유효성을 처리하기 위한 작업을 수행할 수 있습니다. `mode: "onChange"`를 사용하여 입력 값의 변화를 감지하면서 동시에 유효성 검사를 실행합니다. |
| `checkEmailValid` | 이메일 중복 체크를 수행하는 함수입니다. 만약 이메일이 중복되면 에러 메시지를 표시하고, 그렇지 않으면 이메일을 사용할 수 있음을 확인합니다. |
| 이메일 입력 폼 | 이메일에 대한 입력 필드와 레이블, 검증 및 에러 메시지를 포함한 입력 폼입니다. 입력 이메일은 필수이며, 유효한 이메일 형식을 따라야 합니다. |
| 비밀번호 확인 폼 | 비밀번호를 확인하는 입력 폼입니다. 이전에 입력한 비밀번호와 일치해야 합니다. |
```jsx
import { useForm } from "react-hook-form";

const {
    register,
    handleSubmit,
    clearErrors,
    setError,
    getValues,
    formState: { errors, isValid },
  } = useForm({
    mode: "onChange",
    defaultValues: {
      // 초기값
    },
  });
```
```jsx
  const checkEmailValid = async email => {
    try {
      const res = await axios.post(

      // 이메일 Validation API

      const reqMsg = res.data.message;
      clearErrors("email");
      if (reqMsg === "이미 가입된 이메일 주소 입니다.") {
        setError("email", {
          type: "manual",
          message: "이미 가입된 이메일 주소 입니다.",
        });
        return false;
      } else {
        clearErrors("email");
        return true;
```
```jsx
  return (
    <StyledForm onSubmit={handleSubmit(handleFormSubmit)}>
      <StyledInputContainer>
        <StyledLabel htmlFor="email">이메일</StyledLabel>
        <StyledInput
          {...register("email", {
            required: "이메일은 필수 입력입니다.",
            pattern: {
              value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,
              message: "유효한 이메일 주소를 입력하세요.",
            },
          })}
        />
        {errors.email && (
          <StyledError role="alert">{errors.email.message}</StyledError>
        )}
      </StyledInputContainer>
      // 이메일 부분과 동일
            validate: {
              matchesPreviousPassword: value => {
                const { password } = getValues();
                return password === value || "비밀번호가 일치하지 않습니다.";
```

| 코드 | 설명 |
|------|--------|
| `useEffect` 및 `useDebounce` | 해당 코드는 `useEffect`와 `useDebounce`를 사용하여 검색 키워드가 업데이트될 때마다 검색 API를 호출하고 결과를 필터링하여 작성된 코드입니다. `useDebounce`는 일정 시간 동안의 입력이 멈춘 후 API 요청이 될 수 있도록 제어해 불필요한 API 호출을 방지합니다., `useEffect`는 디바운스된 키워드가 변경될 때마다 결과 목록을 업데이트합니다. 추가로 조건에 따라 데이터를 걸러내어 불필요한 이미지 로딩과 처리시간을 줄일수 있게 설계했습니다.|
```jsx
  const [debouncedSearchKeyword] = useDebounce(searchKeyword, 300);

  useEffect(() => {
    const fetchData = async () => {
      if (!debouncedSearchKeyword) {
        return;
      } else {

        // 검색 API 코드 부분

          const filteredData = response.data.filter(
            item => !item.image.startsWith("https://mandarin.api.weniv"),
          );
          setSearchListData(filteredData);
        } 
    };
...
    fetchData();
  }, [debouncedSearchKeyword]);
```
| 코드 | 설명 |
|------|--------|
| `elapsedTime` 함수 | 댓글이 작성된 시간과 현재 시간 사이의 경과 시간을 계산하여 문자열로 반환합니다. 경과 시간은 년, 개월, 일, 시간, 분 등의 단위로 표현되며, 가장 큰 단위부터 계산됩니다. |
```jsx
const elapsedTime = commentDate => {
    const now = new Date();
    const commentTime = new Date(commentDate);
    const elapsedSeconds = Math.floor((now - commentTime) / 1000);

    const times = [
      { name: "년", seconds: 60 * 60 * 24 * 365 },
      { name: "개월", seconds: 60 * 60 * 24 * 30 },
      { name: "일", seconds: 60 * 60 * 24 },
      { name: "시간", seconds: 60 * 60 },
      { name: "분", seconds: 60 },
    ];

    for (const value of times) {
      const elapsed = Math.floor(elapsedSeconds / value.seconds);

      if (elapsed > 0) {
        return `${elapsed}${value.name} 전`;
      }
    }
    return "방금 전";
  };
```
| 코드 | 설명 |
|------|--------|
| `import "./MapStyle.css"` | 지도 컴포넌트에 사용되는 CSS 파일을 불러옵니다.|
| `useState` 및 `useEffect` | Map 컴포넌트를 초기화하고, 사용자 위도, 경도에 따라 지도 마커를 표시하도록 설정합니다. 이를 위해 `useState`와 `useEffect`를 사용하여 상태를 유지하고 컴포넌트 라이프 사이클에 맞추어 동작합니다. |
| 검색 지도 마커 생성 | 검색된 위치의 마커와 오버레이를 생성하고 관련 클릭 이벤트를 처리합니다. |
```jsx
import "./MapStyle.css";
```
```jsx
const { kakao } = window;

const MapTest = () => {
  const [place, setPlace] = useState("");
  const [map, setMap] = useState(null);
  const location = useLocation();
  const data = location.state;
  const recommendName = data.restaurantname;

  useEffect(() => {
    let container = document.getElementById("map");
    let options = { center: new kakao.maps.LatLng(37.5045, 127.049) };
    let kakaoMap = new kakao.maps.Map(container, options);
    setMap(kakaoMap);
  }, []);
  useEffect(() => {
    if (map && recommendName) {
      const ps = new kakao.maps.services.Places();
      ps.keywordSearch(recommendName, placesSearchCB);
      function placesSearchCB(data, status, pagination) {
        if (status === kakao.maps.services.Status.OK) {
          let bounds = new kakao.maps.LatLngBounds();
          for (let i = 0; i < data.length; i++) {
            displayMarker(data[i]);
            bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));
          }
          map.setBounds(bounds);
        }
      }
      function displayMarker(place) {
        const imageSize = new kakao.maps.Size(45, 45);
        const imageSrc = Marker;
        let markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);
        let marker = new kakao.maps.Marker({
          // 마커 커스텀
        });
        let content =
          // 지도 Overlay 커스텀
        setPlace(place.road_address_name);
        let customOverlay = new kakao.maps.CustomOverlay({
          position: new kakao.maps.LatLng(place.y, place.x),
          content: content,
          yAnchor: 1,
        });

        kakao.maps.event.addListener(marker, "click", function () {
          customOverlay.setMap(map);
        });
      }
    }
  }, [recommendName, map]);
```
| 코드 | 설명 |
|------|--------|
| `options` | 이미지 압축에 사용되는 옵션을 설정합니다. 이미지 최대 크기, 최대 너비 또는 높이, 웹 작업자 사용 여부를 설정할 수 있습니다. |
| 이미지 압축 및 변환 | 선택한 파일을 압축하고 이를 미리보기로 표시하며, 데이터 URL로 변환한 후, 이미지를 핸들링하는데 필요한 업로드 함수를 호출합니다. |
| `formDataHandler` | base64 데이터 URI를 blob으로 변환하고, 이를 다시 File 객체로 변환하는 함수입니다. |
```jsx
const options = {
      maxSizeMB: 0.7,
      maxWidthOrHeight: 500,
      useWebWorker: true,
    };
    try {
      const compressedFile = await imageCompression(file, options);
      setBoardImage(compressedFile);
      const promise = imageCompression.getDataUrlFromFile(compressedFile);
      promise.then(result => {
        setUploadPreview(result);
      });
      const reader = new FileReader();
      reader.readAsDataURL(compressedFile);
      reader.onloadend = () => {
        const base64data = reader.result;
        const imageUrl = formDataHandler(base64data);
        onImageUrlChange(file, imageUrl);
        setImgUrl(imageUrl);
      };
    } catch (error) {
      console.log(error);
    }
  };
  const formDataHandler = async dataURI => {
    const byteString = atob(dataURI.split(",")[1]);
    const ab = new ArrayBuffer(byteString.length);
    const ia = new Uint8Array(ab);
    for (let i = 0; i < byteString.length; i++) {
      ia[i] = byteString.charCodeAt(i);
    }
    const blob = new Blob([ab], { type: "image/jpeg" });
    const file = new File([blob], "image.jpg", { type: "image/jpeg" });
    return file;
  };
```



## 🗂️ 폴더 구조

```
    src
      ├─ App.js
      ├─ components
      │  ├─ Auth
      │  ├─ Chat
      │  ├─ Comment
      │  ├─ common
      │  │  ├─ Button
      │  │  ├─ Header
      │  │  └─ Nav
      │  ├─ Error
      │  ├─ Feed
      │  ├─ FollowItem
      │  ├─ Modal
      │  ├─ Post
      │  │  ├─ ImgPrev
      │  │  ├─ PostEdit
      │  │  ├─ PostItem
      │  │  ├─ PostList
      │  │  └─ StarRating
      │  ├─ Profile
      │  ├─ Search
      │  └─ styles
      ├─ pages
      │  ├─ AuthorPage
      │  │  ├─ Login
      │  │  └─ SignUp
      │  ├─ Chat
      │  ├─ Error
      │  ├─ FollowerList
      │  ├─ Home
      │  ├─ Loading
      │  ├─ Map
      │  ├─ Post
      │  ├─ Profile
      │  ├─ ProfileSetting
      │  ├─ Search
      │  ├─ Splash
      │  └─ Welcome
      └─ routes

```
